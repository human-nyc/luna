<div class="faq__inner" id="faq">
  <div class="faq__aside">
    <button type="button" class="faq__selected-category" :class="{ active: navOpen }" @click="toggleNavigation()" :aria-expanded="navOpen" aria-haspopup="true">
      ${activeCategoryName}
    </button>
    <ul class="faq__navigation" :class="{ open: navOpen }">
      {% for block in section.blocks %}
        {% case block.type %}
          {% when 'category' %}
            <li data-id="{{block.settings.identifier}}" :class="{ active: activeCategory == '{{block.settings.identifier}}' }" @click="selectCategory('{{ block.settings.identifier }}', '{{ block.settings.name }}')">
              {{block.settings.name}}
            </li>
        {% endcase %}
      {% endfor %}
    </ul>
  </div>
  <div class="faq__main">
    <div class="faq__main-inner">
      {% for block in section.blocks %}
        {% case block.type %}
          {% when 'question' %}
            <div class="faq-question" data-category-id="{{block.settings.category_id}}" :class="{ active: activeCategory == '{{block.settings.category_id}}' }">
              <h2 class="section-header">{{block.settings.header}}</h2>
              <div>{{block.settings.body}}</div>
            </div>
        {% endcase %}
      {% endfor %}
    </div>
  </div>
</div>

<style>
  .faq__selected-category:after {
    background-image: url({{ 'icon_arrow.svg' | asset_url | image_tag }});
  }
</style>

{% schema %}
  {
    "name": "FAQ",
    "class": "faq",
    "settings": [],
    "blocks": [
      {
        "name": "Category",
        "type": "category",
        "settings": [
          {
            "type": "text",
            "id": "name",
            "label": "Name"
          },
          {
            "type": "text",
            "id": "identifier",
            "label": "Category ID (exact match)"
          }
        ]
      },
      {
        "name": "Question",
        "type": "question",
        "settings": [
          {
            "type": "text",
            "id": "header",
            "label": "Header"
          },
          {
            "type": "richtext",
            "id": "body",
            "label": "Body"
          },
          {
            "type": "text",
            "id": "category_id",
            "label": "Category ID (exact match)"
          }
        ]
      }
    ]
  }
{% endschema %}