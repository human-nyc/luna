{% assign current_variant = product.selected_or_first_available_variant %}
{% assign featured_image = current_variant.featured_image | default: product.featured_image %}

<div class="product-hero" id="ProductForm" data-product="{{ product | json | escape }}" data-variant="{{ current_variant | json | escape }}">
  <div class="product-hero__header">
    <h1 class="product-hero__title">{{ product.title }}</h1>
  </div>
  <div class="product-hero__inner">
    <div class="product-hero__info">
      <div class="product-tabs">
        <div class="product-tabs__header">
          <button type="button" @click="selectTab(1)" class="caps-header" :class="{'selected': tab === 1}">Meet Luna</button>
          <button type="button" @click="selectTab(2)" class="caps-header" :class="{'selected': tab === 2}">Benefits</button>
          <button type="button" @click="selectTab(3)" class="caps-header" :class="{'selected': tab === 3}">Details</button>
        </div>
        <div class="product-tabs__main">
          <div class="product-tabs__content">
            <div class="product-tabs__content" v-if="tab === 1">
              <div>1. {{ product.description }}</div>
            </div>
            <div class="product-tabs__content" v-if="tab === 2">
              <div>2. {{ product.description }}</div>
            </div>
            <div class="product-tabs__content" v-if="tab === 3">
              <div>3. {{ product.description }}</div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="product-hero__image">
      <img src="{{ featured_image | img_url: 'large' }}" alt="{{ featured_image.alt | escape }}" id="ProductPhotoImg" v-bind:src="imageUrl">
    </div>
    <div class="product-hero__form">

      <form action="/cart/add" method="post" enctype="multipart/form-data" id="AddToCartForm">
        <div class="product-hero__option" :class="{'expanded': selecting === 'color'}">
          <div @click="focusOption('color')" class="product-hero__option-header">
            <h3 class="caps-header">01. Choose a color: ${selectedColor}</h3>
          </div>
          <div class="product-hero__option-body">
            <div v-if="options[1]">
              <color-options
                v-bind:colors="colors"
                @changed="onChangeColor"
              /></color-options>
            </div>
          </div>
        </div>
        <div class="product-hero__option" :class="{'expanded': selecting === 'size'}" v-if="sizes">
          <div @click="focusOption('size')" class="product-hero__option-header">
            <h3 class="caps-header">02. Choose your size: ${sizeName(selectedSize)}</h3>
          </div>
          <div class="product-hero__option-body">
            <p class="product-hero__option-body-text">All blankets are meant for individual use except for the King, which is suitable for sharing. Weighted blankets are smaller than traditional comforters because they're meant to cover your body not the bed. <a href="/pages/size-guide" target="_blank">Click here</a> to view our full size chart.</p>
            <div class="size-options">
              <div class="size-option" v-for="size in sizes">
                <label>
                  <span class="size-option__name">${sizeName(size)}</span>
                  <span class="size-option__dimensions">${sizeDimensions(size)}</span>
                  <div class="size-icon" :class="'size-icon_' + sizeName(size)"></div>
                  <input name="size" type="radio" v-model="selectedSize" :value="size" @change="selectSize" />
                </label>
              </div>
            </div>
          </div>
        </div>
        <div class="product-hero__option" :class="{'expanded': selecting === 'weight'}" v-if="weights">
          <div @click="focusOption('weight')" class="product-hero__option-header">
            <h3 class="caps-header">03. Choose your blanket weight</h3>
          </div>
          <div class="product-hero__option-body">
            <p class="product-hero__option-body-text">Weighted blankets should be about 10% of your body weight. King blankets are meant for sharing. We recommend starting off with a lighter weight. <a href="/pages/size-chart" target="_blank">Click here</a> to view our full weight chart.</p>
            <div class="weight-options">
              <div class="weight-option" v-for="weight in weights">
                <label>
                  <input name="weight" type="radio" v-model="selectedWeight" :value="weight" @change="selectWeight" />
                  <span>${weight}</span>
                </label>
              </div>
            </div>
          </div>
        </div>
        <div class="quantity-and-price">
          <div class="quantity-selector">
            <button @click="adjustQuantity(-1)" type="button" aria-label="Decrement quantity">-</button>
            <input id="Quantity" name="quantity" v-model="quantity" min="1" disabled>
            <button @click="adjustQuantity(1)" type="button" aria-label="Increment quantity">+</button>
          </div>
          <span v-cloak class="price">${price}</span>
          <span v-cloak class="price price_compare">${compareAtPrice}</span>
        </div>
        <button class="form-button" type="submit" name="add" id="AddToCart">Add to cart</button>
      </form>
    </div>
  </div>
  <div class="product-hero__corner"><img width="223px" src="{{ 'warranty-banner.png' | asset_url | image_tag }}" alt="Luna Lifetime Warranty"/></div>
</div>

<style>
  .size-icon_twin {
    background-image: url("{{ 'size-twin.svg' | asset_url }}");
  }
  .size-icon_full {
    background-image: url("{{ 'size-full.svg' | asset_url }}");
  }
  .size-icon_queen {
    background-image: url("{{ 'size-queen.svg' | asset_url }}");
  }
  .size-icon_king {
    background-image: url("{{ 'size-king.svg' | asset_url }}");
  }
</style>
